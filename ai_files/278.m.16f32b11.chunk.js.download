(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{1798:function(e,t,s){var a=s(313),n=s(1799);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},1799:function(e,t,s){(t=s(314)(!1)).push([e.i,".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#666;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#333;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures-viewer{display:flex;margin:0 -8px}.measures-viewer+.measures-viewer{margin-top:8px}.measures-viewer-header{font-size:12px}.measures-viewer-secondary .measures-viewer-card{background-color:#f3f3f3}.measures-viewer-section{flex:1}.measures-viewer-section-limited{max-width:25%}.measures-viewer-card{margin:16px 8px;padding:8px;border:1px solid #e6e6e6;background-color:#fff}.measures+.measures{margin-top:16px;padding-top:16px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:80px;margin-right:24px;text-align:center}.measure{line-height:1.34}.measure-one-line{display:flex;justify-content:space-between}.measure-one-line .measure-name{display:inline}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:4px;margin-bottom:8px;font-size:16px}.measure-big .measure-value,.measure-big .rating{font-size:24px}.measure-big+.measure-big{margin-left:24px}",""]),e.exports=t},323:function(e,t,s){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};Object.defineProperty(t,"__esModule",{value:!0});var r=s(311),i=s(2),o=s(375),l=s(339);s(342);var c=s(318);function p(e){var t=e.size,s=void 0===t?12:t,a=n(e,["size"]);return i.createElement("div",{className:r("help-tooltip",a.className)},i.createElement(c.default,{mouseLeaveDelay:.25,onShow:a.onShow,overlay:a.overlay,placement:a.placement},i.createElement("span",{className:"display-inline-flex-center"},a.children||i.createElement(l.ThemeConsumer,null,(function(e){return i.createElement(o.default,{fill:e.colors.gray71,size:s})})))))}t.default=p,t.DarkHelpTooltip=function(e){var t=e.size,s=void 0===t?12:t,r=n(e,["size"]);return i.createElement(p,a({},r),i.createElement(l.ThemeConsumer,null,(function(e){var t=e.colors;return i.createElement(o.default,{fill:t.transparentBlack,fillInner:t.white,size:s})})))}},342:function(e,t,s){var a=s(313),n=s(343);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},343:function(e,t,s){(t=s(314)(!1)).push([e.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""]),e.exports=t},380:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(311),n=s(2),r=s(320);s(416),t.default=function(e){var t=r.formatMeasure(e.level,"LEVEL"),s=a(e.className,"level","level-"+e.level,{"level-small":e.small,"level-muted":e.muted});return n.createElement("span",{"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],className:s},t)}},398:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(2),n=s(478),r=s.n(n),i=s(31);function o({className:e,severity:t}){return t?a.createElement("span",{className:e},a.createElement(r.a,{className:"little-spacer-right",severity:t}),Object(i.translate)("severity",t)):null}},404:function(e,t,s){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};Object.defineProperty(t,"__esModule",{value:!0});var r=s(311),i=s(2),o=s(31),l=s(320);s(495),t.default=function(e){var t=e.className,s=e.muted,c=void 0!==s&&s,p=e.small,u=void 0!==p&&p,m=e.value,h=n(e,["className","muted","small","value"]);if(void 0===m)return i.createElement("span",a({"aria-label":o.translate("metric.no_rating")},h),"–");var d=l.formatMeasure(m,"RATING");return i.createElement("span",a({"aria-label":o.translateWithParameters("metric.has_rating_X",d),className:r("rating","rating-"+d,{"rating-small":u,"rating-muted":c},t)},h),d)}},409:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return c}));var a=s(354);function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const i=["sqale_rating","maintainability_rating","reliability_rating","security_rating","security_review_rating"];function o(e,t){return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e,{metric:t[e.metric],leak:l(e)})}function l(e){var t;return null===(t=null==e?void 0:e.period)||void 0===t?void 0:t.value}function c(e,t){const s=Object(a.isDiffMetric)(e)?e.substr(4):e;if(i.includes(s))return Object(a.getRatingTooltip)(s,t)}},416:function(e,t,s){var a=s(313),n=s(417);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},417:function(e,t,s){(t=s(314)(!1)).push([e.i,".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}.level-NOT_COMPUTED{background-color:#404040}",""]),e.exports=t},421:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var a=s(2),n=s(318),r=s.n(n),i=s(380),o=s.n(i),l=s(404),c=s.n(l),p=s(320),u=s(409);function m({className:e,decimals:t,metricKey:s,metricType:n,small:i,value:l}){if(void 0===l)return a.createElement("span",{className:e},"–");if("LEVEL"===n)return a.createElement(o.a,{className:e,level:l,small:i});if("RATING"!==n){const s=Object(p.formatMeasure)(l,n,{decimals:t,omitExtraDecimalZeros:"PERCENT"===n});return a.createElement("span",{className:e},null!=s?s:"–")}const m=Object(u.c)(s,Number(l)),h=a.createElement(c.a,{small:i,value:l});return m?a.createElement(r.a,{overlay:m},a.createElement("span",{className:e},h)):h}},452:function(e,t,s){var a=s(313),n=s(524);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},476:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var a=s(2),n=s(317),r=s(323),i=s.n(r),o=s(386),l=s.n(o),c=s(434);function p(e){const{className:t,content:s,links:r,title:o}=e;return a.createElement(i.a,{className:t,overlay:a.createElement("div",{className:"big-padded-top big-padded-bottom"},o&&a.createElement("div",{className:"spacer-bottom"},a.createElement("strong",null,o)),s&&a.createElement("p",null,s),r&&a.createElement(a.Fragment,null,a.createElement("hr",{className:"big-spacer-top big-spacer-bottom"}),r.map(({href:e,label:t,inPlace:s})=>a.createElement("div",{className:"little-spacer-bottom",key:t},s?a.createElement(n.c,{to:e},a.createElement("span",null,t)):a.createElement("a",{className:"display-inline-flex-center link-with-icon",href:e,rel:"noopener noreferrer",target:"_blank"},Object(c.isWebUri)(e)&&a.createElement(l.a,{size:14,className:"spacer-right"}),a.createElement("span",null,t))))))},e.children)}},495:function(e,t,s){var a=s(313),n=s(496);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},496:function(e,t,s){(t=s(314)(!1)).push([e.i,".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#d4333f}a .rating-E{border-bottom-color:#d4333f}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}",""]),e.exports=t},505:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var a=s(401),n=s.n(a),r=s(311),i=s(2),o=s(355),l=s.n(o),c=s(31),p=s(340),u=s.n(p);function m(e){const{active:t,custom:s,disabled:a,element:n,selected:o}=e,l=()=>e.onHover(n),p=r({active:t,disabled:a}),m=e.renderLabel(n);return i.createElement("li",{onFocus:l,onMouseOver:l},i.createElement(u.a,{checked:Boolean(o),className:p,disabled:a,id:n,onCheck:e.onSelectChange},s?i.createElement("span",{"aria-label":"".concat(Object(c.translate)("create_new_element"),": ").concat(m),className:"little-spacer-left"},i.createElement("span",{"aria-hidden":!0,className:"little-spacer-right"},"+"),m):i.createElement("span",{className:"little-spacer-left"},m)))}class h extends i.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleSelectChange=(e,t)=>{e?this.onSelectItem(t):this.onUnselectItem(t)},this.handleSearchChange=e=>{this.onSearchQuery(this.props.validateSearchInput(e))},this.handleElementHover=e=>{this.setState((t,s)=>({activeIdx:this.getAllElements(s,t).indexOf(e)}))},this.handleKeyboard=e=>{switch(e.keyCode){case 40:e.stopPropagation(),e.preventDefault(),this.setState(this.selectNextElement);break;case 38:e.stopPropagation(),e.preventDefault(),this.setState(this.selectPreviousElement);break;case 37:case 39:e.stopPropagation();break;case 13:this.state.activeIdx>=0&&this.toggleSelect(this.getAllElements(this.props,this.state)[this.state.activeIdx])}},this.onSearchQuery=e=>{this.setState({activeIdx:0,loading:!0,query:e}),this.props.onSearch(e).then(this.stopLoading,this.stopLoading)},this.onSelectItem=e=>{this.isNewElement(e,this.props)&&this.onSearchQuery(""),this.props.onSelect(e)},this.onUnselectItem=e=>this.props.onUnselect(e),this.isNewElement=(e,{selectedElements:t,elements:s})=>e.length>0&&-1===t.indexOf(e)&&-1===s.indexOf(e),this.updateSelectedElements=e=>{this.setState(t=>t.query?{selectedElements:e.filterSelected(t.query,e.selectedElements)}:{selectedElements:[...e.selectedElements]})},this.updateUnselectedElements=e=>{this.setState(t=>0===e.listSize?{unselectedElements:n()(e.elements,e.selectedElements)}:e.listSize<t.selectedElements.length?{unselectedElements:[]}:{unselectedElements:n()(e.elements,e.selectedElements).slice(0,e.listSize-t.selectedElements.length)})},this.getAllElements=(e,t)=>this.isNewElement(t.query,e)?[...t.selectedElements,...t.unselectedElements,t.query]:[...t.selectedElements,...t.unselectedElements],this.setElementActive=e=>this.setState({activeIdx:e}),this.selectNextElement=(e,t)=>{const{activeIdx:s}=e,a=this.getAllElements(t,e);return s<0||s>=a.length-1?{activeIdx:0}:{activeIdx:s+1}},this.selectPreviousElement=(e,t)=>{const{activeIdx:s}=e,a=this.getAllElements(t,e);if(s<=0){return{activeIdx:a.length-1}}return{activeIdx:s-1}},this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.toggleSelect=e=>{-1===this.props.selectedElements.indexOf(e)?this.onSelectItem(e):this.onUnselectItem(e)},this.state={activeIdx:0,loading:!0,query:"",selectedElements:[],unselectedElements:[]}}componentDidMount(){this.mounted=!0,this.onSearchQuery(""),this.updateSelectedElements(this.props),this.updateUnselectedElements(this.props),this.container&&this.container.addEventListener("keydown",this.handleKeyboard,!0)}componentWillReceiveProps(e){if(this.props.elements!==e.elements||this.props.selectedElements!==e.selectedElements){this.updateSelectedElements(e),this.updateUnselectedElements(e);const t=this.getAllElements(e,this.state).length;this.state.activeIdx>=t&&this.setState({activeIdx:t-1})}}componentDidUpdate(){this.searchInput&&this.searchInput.focus()}componentWillUnmount(){this.mounted=!1,this.container&&this.container.removeEventListener("keydown",this.handleKeyboard)}render(){const{allowSelection:e=!0,allowNewElements:t=!0,footerNode:s=""}=this.props,{renderLabel:a}=this.props,{query:n,activeIdx:o,selectedElements:p,unselectedElements:u}=this.state,h=this.getAllElements(this.props,this.state)[o],d=t&&this.isNewElement(n,this.props),g=0===this.props.listSize,b=r("menu",{"menu-vertically-limited":g,"spacer-top":g,"with-top-separator":g,"with-bottom-separator":Boolean(s)});return i.createElement("div",{className:"multi-select",ref:e=>this.container=e},i.createElement("div",{className:"menu-search"},i.createElement(l.a,{autoFocus:!0,className:"little-spacer-top",loading:this.state.loading,onChange:this.handleSearchChange,placeholder:this.props.placeholder,value:n})),i.createElement("ul",{className:b},p.length>0&&p.map(e=>i.createElement(m,{active:h===e,element:e,key:e,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:a,selected:!0})),u.length>0&&u.map(t=>i.createElement(m,{active:h===t,disabled:!e,element:t,key:t,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:a})),d&&i.createElement(m,{active:h===n,custom:!0,element:n,key:n,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:a}),!d&&p.length<1&&u.length<1&&i.createElement("li",{className:"spacer-left"},Object(c.translateWithParameters)("no_results_for_x",n))),s)}}h.defaultProps={filterSelected:(e,t)=>t.filter(t=>t.includes(e)),listSize:0,renderLabel:e=>e,validateSearchInput:e=>e}},510:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var a=s(311),n=s(2),r=s(337),i=s.n(r),o=s(435),l=s.n(o),c=s(31);s(452);function p({allowUpdate:e=!1,className:t,tags:s}){return n.createElement("span",{"aria-label":Object(c.translateWithParameters)("tags_list_x",s.join(", ")),className:a("tags-list",t)},n.createElement(l.a,{className:"text-middle"}),n.createElement("span",{"aria-hidden":!0,className:"text-ellipsis text-middle",title:s.join(", ")},s.join(", ")),e&&n.createElement(i.a,{className:"text-middle"}))}},511:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(311),n=s(2),r=s(31),i=s(322);class o extends n.PureComponent{handleClick(e){e.preventDefault(),window.open(Object(i.o)(),"Formatting","height=300,width=600,scrollbars=1,resizable=1")}render(){return n.createElement("div",{className:a("markdown-tips",this.props.className)},n.createElement("a",{className:"little-spacer-right",href:"#",onClick:this.handleClick},Object(r.translate)("formatting.helplink")),":",n.createElement("span",{className:"spacer-left"},"*",Object(r.translate)("bold"),"*"),n.createElement("span",{className:"spacer-left"},"``",Object(r.translate)("code"),"``"),n.createElement("span",{className:"spacer-left"},"* ",Object(r.translate)("bulleted_point")))}}},524:function(e,t,s){(t=s(314)(!1)).push([e.i,".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}",""]),e.exports=t},527:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s(2),n=s(332),r=s(348);const i=Object(n.lazyLoadComponent)(()=>s.e(357).then(s.t.bind(null,755,7)),"DonutChart"),o={small:16,normal:24,big:40,huge:60},l={small:2,normal:3,big:3,huge:4};function c({muted:e=!1,size:t="normal",value:s}){let n=[{value:100,fill:"#ccc "}],c=0;if(null!=s){const t=Number(s);n=[{value:t,fill:e?r.colors.gray71:r.colors.green},{value:100-t,fill:e?r.colors.barBackgroundColor:r.colors.lineCoverageRed}],0!==t&&t<100&&(c=.1)}const p=o[t],u=l[t];return a.createElement(i,{data:n,height:p,padAngle:c,thickness:u,width:p})}},561:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(2),n=s(31),r=s(505);s(452);function i(e){return a.createElement(r.a,{elements:e.tags,listSize:e.listSize,onSearch:e.onSearch,onSelect:e.onSelect,onUnselect:e.onUnselect,placeholder:Object(n.translate)("search.search_for_tags"),selectedElements:e.selectedTags,validateSearchInput:o})}function o(e){return e.toLowerCase().replace(/[^-a-z0-9+#.]/gi,"")}},563:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(311),n=s(2);s(706);function r(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function i(e){const{children:t,leading:s,onClick:i,selected:o}=e,l=r(e,["children","leading","onClick","selected"]),c=i?{onClick:i,role:"button",tabIndex:0}:{};return n.createElement("div",Object.assign({className:a("location-index",{"is-leading":s,selected:o})},c,l),t)}},564:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(2),n=s(846),r=s.n(n),i=s(31);function o(e){const t=e.resolution&&" (".concat(Object(i.translate)("issue.resolution",e.resolution),")");return a.createElement("span",{className:e.className},a.createElement(r.a,{className:"little-spacer-right",status:e.status}),Object(i.translate)("issue.status",e.status),t)}},606:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(311),n=s(27),r=s(2);s(643),t.default=function(e){var t=e.muted,s=void 0!==t&&t,i=e.size,o=void 0===i?"normal":i,l=e.value,c=a("duplications-rating",{"duplications-rating-small":"small"===o,"duplications-rating-big":"big"===o,"duplications-rating-huge":"huge"===o,"duplications-rating-muted":s||null==l||isNaN(l),"duplications-rating-A":n.inRange(l||0,0,3),"duplications-rating-B":n.inRange(l||0,3,5),"duplications-rating-C":n.inRange(l||0,5,10),"duplications-rating-D":n.inRange(l||0,10,20),"duplications-rating-E":(l||0)>=20});return r.createElement("div",{className:c})}},643:function(e,t,s){var a=s(313),n=s(644);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},644:function(e,t,s){(t=s(314)(!1)).push([e.i,'.duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:""}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}',""]),e.exports=t},658:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(2),n=s(31),r=s(320);function i({diff:e}){if("file"===e.key)return a.createElement("p",null,Object(n.translateWithParameters)("issue.change.file_move",e.oldValue||"",e.newValue||""));if(["from_long_branch","from_branch"].includes(e.key))return a.createElement("p",null,Object(n.translateWithParameters)("issue.change.from_branch",e.oldValue||"",e.newValue||""));if("from_short_branch"===e.key)return a.createElement("p",null,Object(n.translateWithParameters)("issue.change.from_non_branch",e.oldValue||"",e.newValue||""));if("line"===e.key)return a.createElement("p",null,Object(n.translateWithParameters)("issue.changelog.line_removed_X",e.oldValue||""));let t;if(null!=e.newValue){let{newValue:s}=e;"effort"===e.key&&(s=Object(r.formatMeasure)(e.newValue,"WORK_DUR")),t=Object(n.translateWithParameters)("issue.changelog.changed_to",Object(n.translate)("issue.changelog.field",e.key),s)}else t=Object(n.translateWithParameters)("issue.changelog.removed",Object(n.translate)("issue.changelog.field",e.key));if(null!=e.oldValue){let{oldValue:s}=e;"effort"===e.key&&(s=Object(r.formatMeasure)(e.oldValue,"WORK_DUR")),t+=" (".concat(Object(n.translateWithParameters)("issue.changelog.was",s),")")}return a.createElement("p",null,t)}},679:function(e,t,s){"use strict";s.d(t,"a",(function(){return Xe}));var a=s(474),n=s(2),r=s(361),i=s(324),o=s(556);const l=(e,t,s,a)=>{const n=void 0!==s&&void 0!==a;n&&e(a),t.then(t=>{if(!n){const s=Object(o.b)(t.issue,t.components,t.users,t.rules);e(s)}},t=>{n&&e(s),Object(i.a)(t)})};s(711);var c=s(311),p=s.n(c),u=s(340),m=s.n(u),h=s(31),d=s(312),g=s(363),b=s.n(g),f=s(337),v=s.n(f),y=s(385),E=s(364),O=s.n(E),x=s(327),j=s(355),w=s.n(j),N=s(441),k=s(352),P=s(760),S=s.n(P),C=s(318),L=s.n(C);class _ extends n.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{e.preventDefault(),this.props.onSelect&&this.props.onSelect(this.props.item)},this.handleHover=()=>{this.props.onHover&&this.props.onHover(this.props.item)}}renderLink(){const e=this.props.children||this.props.item;return n.createElement("li",null,n.createElement("a",{className:p()({active:this.props.active===this.props.item},this.props.className),href:"#",onClick:this.handleSelect,onFocus:this.handleHover,onMouseOver:this.handleHover},e))}render(){return n.createElement(L.a,{overlay:this.props.title||void 0,placement:"right"},this.renderLink())}}class I extends n.PureComponent{constructor(e){super(e),this.attachShortcuts=()=>{this.previousKeyScope=a.getScope(),this.previousFilter=a.filter,this.currentKeyScope=S()("key-scope"),a.setScope(this.currentKeyScope),a.filter=e=>{const{tagName:t}=e.target||e.srcElement,s="INPUT"===t||"SELECT"===t||"TEXTAREA"===t;return[13,38,40].includes(e.keyCode)||!s},a("down",this.currentKeyScope,()=>(this.setState(this.selectNextElement),!1)),a("up",this.currentKeyScope,()=>(this.setState(this.selectPreviousElement),!1)),a("return",this.currentKeyScope,()=>(null!=this.state.active&&this.handleSelect(this.state.active),!1))},this.detachShortcuts=()=>{this.previousKeyScope&&a.setScope(this.previousKeyScope),this.currentKeyScope&&a.deleteScope(this.currentKeyScope),a.filter=this.previousFilter},this.handleSelect=e=>{this.props.onSelect(e)},this.handleHover=e=>{this.setState({active:e})},this.selectNextElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<0?{active:t.items[0]}:{active:t.items[(s+1)%t.items.length]}},this.selectPreviousElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<=0?{active:t.items[t.items.length-1]}:{active:t.items[s-1]}},this.renderChild=e=>null==e?null:e.type!==_?e:n.cloneElement(e,{active:this.state.active,onHover:this.handleHover,onSelect:this.handleSelect}),this.state={active:e.currentItem}}componentDidMount(){this.attachShortcuts()}componentDidUpdate(e){e.currentItem===this.props.currentItem||this.props.items.includes(this.state.active)||this.setState({active:this.props.currentItem})}componentWillUnmount(){this.detachShortcuts()}render(){const{children:e}=this.props,t=n.Children.count(e)>0;return n.createElement("ul",{className:p()("menu",this.props.className)},t&&n.Children.map(e,this.renderChild),!t&&this.props.items.map(e=>n.createElement(_,{active:this.state.active,item:e,key:e,onHover:this.handleHover,onSelect:this.handleSelect})))}}var D=s(428);class T extends n.PureComponent{constructor(e){super(e),this.searchUsers=e=>{Object(N.f)({q:e,ps:10}).then(this.handleSearchResult,()=>{})},this.handleSearchResult=({users:e})=>{const t=e.filter(k.c);this.setState({users:t,currentUser:t.length>0?t[0].login:""})},this.handleSearchChange=e=>{0===e.length?this.setState({query:e,users:this.defaultUsersArray,currentUser:this.defaultUsersArray[0].login}):(this.setState({query:e}),this.searchUsers(e))},this.defaultUsersArray=[{login:"",name:Object(h.translate)("unassigned")}],Object(k.b)(e.currentUser)&&(this.defaultUsersArray=[e.currentUser,...this.defaultUsersArray]),this.state={query:"",users:this.defaultUsersArray,currentUser:this.defaultUsersArray.length>0?this.defaultUsersArray[0].login:""}}render(){return n.createElement(x.DropdownOverlay,{noPadding:!0},n.createElement("div",{className:"multi-select"},n.createElement("div",{className:"menu-search"},n.createElement(w.a,{autoFocus:!0,className:"little-spacer-top",minLength:2,onChange:this.handleSearchChange,placeholder:Object(h.translate)("search.search_for_users"),value:this.state.query})),n.createElement(I,{currentItem:this.state.currentUser,items:O()(this.state.users,"login"),onSelect:this.props.onSelect},this.state.users.map(e=>n.createElement(_,{item:e.login,key:e.login},!!e.login&&n.createElement(y.a,{className:"spacer-right",hash:e.avatar,name:e.name,size:16}),n.createElement("span",{className:"text-middle",style:{marginLeft:e.login?24:void 0}},e.name))))))}}var M=Object(D.a)(T);class A extends n.PureComponent{constructor(){super(...arguments),this.toggleAssign=e=>{this.props.togglePopup("assign",e)},this.handleClose=()=>{this.toggleAssign(!1)}}renderAssignee(){const{issue:e}=this.props,t=e.assigneeName||e.assignee;return t?n.createElement(n.Fragment,null,n.createElement("span",{className:"text-top"},n.createElement(y.a,{className:"little-spacer-right",hash:e.assigneeAvatar,name:t,size:16})),n.createElement("span",{className:"issue-meta-label"},!1===e.assigneeActive?Object(h.translateWithParameters)("user.x_deleted",t):t)):n.createElement("span",{className:"issue-meta-label"},Object(h.translate)("unassigned"))}render(){const{canAssign:e,isOpen:t,issue:s}=this.props,a=s.assigneeName||s.assignee;return e?n.createElement("div",{className:"dropdown"},n.createElement(b.a,{closeOnEscape:!0,onRequestClose:this.handleClose,open:t,overlay:n.createElement(M,{onSelect:this.props.onAssign})},n.createElement(d.ButtonLink,{"aria-expanded":t,"aria-label":a?Object(h.translateWithParameters)("issue.assign.assigned_to_x_click_to_change",a):Object(h.translate)("issue.assign.unassigned_click_to_assign"),className:"issue-action issue-action-with-options js-issue-assign",onClick:this.toggleAssign},this.renderAssignee(),n.createElement(v.a,{className:"little-spacer-left"})))):this.renderAssignee()}}var B=s(511);class R extends n.PureComponent{constructor(e){super(e),this.handleCommentChange=e=>{this.setState({textComment:e.target.value})},this.handleCommentClick=()=>{this.state.textComment.trim().length>0&&this.props.onComment(this.state.textComment)},this.handleCancelClick=()=>{this.props.toggleComment(!1)},this.handleKeyboard=e=>{13===e.keyCode&&(e.metaKey||e.ctrlKey)?this.handleCommentClick():[37,38,39,40].includes(e.keyCode)&&e.stopPropagation()},this.state={textComment:e.comment?e.comment.markdown:""}}render(){const{comment:e,autoTriggered:t}=this.props;return n.createElement(x.DropdownOverlay,{placement:this.props.placement},n.createElement("div",{className:"issue-comment-bubble-popup"},n.createElement("div",{className:"issue-comment-form-text"},n.createElement("textarea",{autoFocus:!0,onChange:this.handleCommentChange,onKeyDown:this.handleKeyboard,placeholder:this.props.placeholder,rows:2,value:this.state.textComment})),n.createElement("div",{className:"issue-comment-form-footer"},n.createElement("div",{className:"issue-comment-form-actions"},n.createElement(d.Button,{className:"js-issue-comment-submit little-spacer-right",disabled:this.state.textComment.trim().length<1,onClick:this.handleCommentClick},e&&Object(h.translate)("save"),!e&&Object(h.translate)("issue.comment.submit")),n.createElement(d.ResetButtonLink,{className:"js-issue-comment-cancel",onClick:this.handleCancelClick},t?Object(h.translate)("skip"):Object(h.translate)("cancel"))),n.createElement("div",{className:"issue-comment-form-tips"},n.createElement(B.a,null)))))}}class U extends n.PureComponent{constructor(){super(...arguments),this.addComment=e=>{l(this.props.onChange,Object(r.a)({issue:this.props.issueKey,text:e})),this.props.toggleComment(!1)},this.handleCommentClick=()=>{this.props.toggleComment()},this.handleClose=()=>{this.props.toggleComment(!1)}}render(){return n.createElement("li",{className:"issue-meta dropdown"},n.createElement(b.a,{closeOnClickOutside:!1,onRequestClose:this.handleClose,open:"comment"===this.props.currentPopup,overlay:n.createElement(R,{autoTriggered:this.props.commentAutoTriggered,onComment:this.addComment,placeholder:this.props.commentPlaceholder,toggleComment:this.props.toggleComment})},n.createElement(d.ButtonLink,{"aria-expanded":"comment"===this.props.currentPopup,"aria-label":Object(h.translate)("issue.comment.add_comment"),className:"issue-action js-issue-comment",onClick:this.handleCommentClick},n.createElement("span",{className:"issue-meta-label"},Object(h.translate)("issue.comment.formlink")))))}}var F=s(398),z=s(478),q=s.n(z);const H=["BLOCKER","CRITICAL","MAJOR","MINOR","INFO"];function W({issue:e,onSelect:t}){return n.createElement(x.DropdownOverlay,null,n.createElement(I,{currentItem:e.severity,items:H,onSelect:t},H.map(e=>n.createElement(_,{className:"display-flex-center",item:e,key:e},n.createElement(q.a,{className:"little-spacer-right",severity:e}),Object(h.translate)("severity",e)))))}class K extends n.PureComponent{constructor(){super(...arguments),this.toggleSetSeverity=e=>{this.props.togglePopup("set-severity",e)},this.setSeverity=e=>{this.props.setIssueProperty("severity","set-severity",r.m,e)},this.handleClose=()=>{this.toggleSetSeverity(!1)}}render(){const{issue:e}=this.props;return this.props.canSetSeverity?n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetSeverity,overlay:n.createElement(W,{issue:e,onSelect:this.setSeverity})},n.createElement(d.ButtonLink,{"aria-label":Object(h.translateWithParameters)("issue.severity.severity_x_click_to_change",Object(h.translate)("severity",e.severity)),"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-set-severity",onClick:this.toggleSetSeverity},n.createElement(F.a,{className:"issue-meta-label",severity:e.severity}),n.createElement(v.a,{className:"little-spacer-left"})))):n.createElement(F.a,{className:"issue-meta-label",severity:e.severity})}}var V=s(510),Y=s(350),Q=s.n(Y),X=s(401),G=s.n(X),J=s(377),Z=s(561);class $ extends n.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={searchResult:[]},this.onSearch=e=>Object(r.j)({q:e,ps:Math.min(this.props.selectedTags.length-1+10,100)}).then(e=>{this.mounted&&this.setState({searchResult:e})},()=>{}),this.onSelect=e=>{this.props.setTags([...this.props.selectedTags,e])},this.onUnselect=e=>{this.props.setTags(Q()(this.props.selectedTags,e))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=G()(this.state.searchResult,this.props.selectedTags);return n.createElement(x.DropdownOverlay,{placement:J.PopupPlacement.BottomRight},n.createElement(Z.a,{listSize:10,onSearch:this.onSearch,onSelect:this.onSelect,onUnselect:this.onUnselect,selectedTags:this.props.selectedTags,tags:e}))}}function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class se extends n.PureComponent{constructor(){super(...arguments),this.toggleSetTags=e=>{this.props.togglePopup("edit-tags",e)},this.setTags=e=>{const{issue:t}=this.props,s=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t,{tags:e});l(this.props.onChange,Object(r.n)({issue:t.key,tags:e.join(",")}),t,s)},this.handleClose=()=>{this.toggleSetTags(!1)}}render(){const{issue:e}=this.props,{tags:t=[]}=e;return this.props.canSetTags?n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:n.createElement($,{selectedTags:t,setTags:this.setTags})},n.createElement(d.ButtonLink,{"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-edit-tags",onClick:this.toggleSetTags},n.createElement(V.a,{allowUpdate:this.props.canSetTags,tags:e.tags&&e.tags.length>0?e.tags:[Object(h.translate)("issue.no_tag")]})))):n.createElement(V.a,{allowUpdate:this.props.canSetTags,className:"note",tags:e.tags&&e.tags.length>0?e.tags:[Object(h.translate)("issue.no_tag")]})}}var ae=s(564);function ne({fromHotspot:e,onSelect:t,transitions:s,type:a}){const r=e&&"VULNERABILITY"===a;return n.createElement(x.DropdownOverlay,null,n.createElement(I,{currentItem:s[0],items:s,onSelect:t},s.map(e=>{const[t,s]=function(e,t){return t&&Object(h.hasMessage)("vulnerability.transition",e)?[Object(h.translate)("vulnerability.transition",e),Object(h.translate)("vulnerability.transition",e,"description")]:[Object(h.translate)("issue.transition",e),Object(h.translate)("issue.transition",e,"description")]}(e,r);return n.createElement(_,{item:e,key:e,title:s},t)})))}class re extends n.PureComponent{constructor(){super(...arguments),this.setTransition=e=>{l(this.props.onChange,Object(r.o)({issue:this.props.issue.key,transition:e})),this.toggleSetTransition()},this.toggleSetTransition=e=>{this.props.togglePopup("transition",e)},this.handleClose=()=>{this.toggleSetTransition(!1)}}render(){const{issue:e}=this.props;return this.props.hasTransitions?n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.hasTransitions,overlay:n.createElement(ne,{fromHotspot:e.fromHotspot,onSelect:this.setTransition,transitions:e.transitions,type:e.type})},n.createElement(d.ButtonLink,{"aria-label":Object(h.translateWithParameters)("issue.transition.status_x_click_to_change",Object(h.translate)("issue.status",e.status)),"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-transition",onClick:this.toggleSetTransition},n.createElement(ae.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status}),n.createElement(v.a,{className:"little-spacer-left"})))):n.createElement(ae.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status})}}var ie=s(381),oe=s.n(ie),le=s(348);const ce=["BUG","VULNERABILITY","CODE_SMELL"];function pe({issue:e,onSelect:t}){return n.createElement(x.DropdownOverlay,null,n.createElement(I,{currentItem:e.type,items:ce,onSelect:t},ce.map(e=>n.createElement(_,{className:"display-flex-center",item:e,key:e},n.createElement(oe.a,{className:"little-spacer-right",query:e}),Object(h.translate)("issue.type",e)))))}class ue extends n.PureComponent{constructor(){super(...arguments),this.toggleSetType=e=>{this.props.togglePopup("set-type",e)},this.setType=e=>{this.props.setIssueProperty("type","set-type",r.p,e)},this.handleClose=()=>{this.toggleSetType(!1)}}render(){const{issue:e}=this.props;return this.props.canSetType?n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetType,overlay:n.createElement(pe,{issue:e,onSelect:this.setType})},n.createElement(d.ButtonLink,{"aria-label":Object(h.translateWithParameters)("issue.type.type_x_click_to_change",Object(h.translate)("issue.type",e.type)),"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-set-type",onClick:this.toggleSetType},n.createElement(oe.a,{className:"little-spacer-right",fill:le.colors.baseFontColor,query:e.type}),Object(h.translate)("issue.type",e.type),n.createElement(v.a,{className:"little-spacer-left"})))):n.createElement("span",null,n.createElement(oe.a,{className:"little-spacer-right",query:e.type}),Object(h.translate)("issue.type",e.type))}}function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function he(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class de extends n.PureComponent{constructor(){super(...arguments),this.state={commentAutoTriggered:!1,commentPlaceholder:""},this.setIssueProperty=(e,t,s,a)=>{const{issue:n}=this.props;if(n[e]!==a){const t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach((function(t){he(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},n,{[e]:a});l(this.props.onChange,s({issue:n.key,[e]:a}),n,t)}this.props.togglePopup(t,!1)},this.toggleComment=(e,t="",s=!1)=>{this.setState({commentPlaceholder:t,commentAutoTriggered:s}),this.props.togglePopup("comment",e)},this.handleTransition=e=>{this.props.onChange(e),("FALSE-POSITIVE"===e.resolution||"WONTFIX"===e.resolution&&"SECURITY_HOTSPOT"!==e.type)&&this.toggleComment(!0,Object(h.translate)("issue.comment.explain_why"),!0)}}render(){const{issue:e}=this.props,t=e.actions.includes("assign"),s=e.actions.includes("comment"),a=e.actions.includes("set_severity"),r=e.actions.includes("set_type"),i=e.actions.includes("set_tags"),o=e.transitions&&e.transitions.length>0,l="SECURITY_HOTSPOT"===e.type;return n.createElement("div",{className:"issue-actions"},n.createElement("div",{className:"issue-meta-list"},n.createElement("div",{className:"issue-meta"},n.createElement(ue,{canSetType:r,isOpen:"set-type"===this.props.currentPopup&&r,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),!l&&n.createElement("div",{className:"issue-meta"},n.createElement(K,{canSetSeverity:a,isOpen:"set-severity"===this.props.currentPopup&&a,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),n.createElement("div",{className:"issue-meta"},n.createElement(re,{hasTransitions:o,isOpen:"transition"===this.props.currentPopup&&o,issue:e,onChange:this.handleTransition,togglePopup:this.props.togglePopup})),n.createElement("div",{className:"issue-meta"},n.createElement(A,{canAssign:t,isOpen:"assign"===this.props.currentPopup&&t,issue:e,onAssign:this.props.onAssign,togglePopup:this.props.togglePopup})),!l&&e.effort&&n.createElement("div",{className:"issue-meta"},n.createElement("span",{className:"issue-meta-label"},Object(h.translateWithParameters)("issue.x_effort",e.effort))),s&&n.createElement(U,{commentAutoTriggered:this.state.commentAutoTriggered,commentPlaceholder:this.state.commentPlaceholder,currentPopup:this.props.currentPopup,issueKey:e.key,onChange:this.props.onChange,toggleComment:this.toggleComment})),n.createElement("div",{className:"list-inline"},n.createElement("div",{className:"issue-meta js-issue-tags"},n.createElement(se,{canSetTags:i,isOpen:"edit-tags"===this.props.currentPopup&&i,issue:e,onChange:this.props.onChange,togglePopup:this.props.togglePopup}))))}}var ge=s(488),be=s(367),fe=s.n(be);function ve({onDelete:e}){return n.createElement(x.DropdownOverlay,{placement:J.PopupPlacement.BottomRight},n.createElement("div",{className:"menu is-container"},n.createElement("div",{className:"spacer-bottom"},Object(h.translate)("issue.comment.delete_confirm_message")),n.createElement(d.Button,{className:"button-red",onClick:e},Object(h.translate)("delete"))))}class ye extends n.PureComponent{constructor(){super(...arguments),this.state={openPopup:""},this.handleEdit=e=>{this.props.onEdit(this.props.comment.key,e),this.toggleEditPopup(!1)},this.handleDelete=()=>{this.props.onDelete(this.props.comment.key),this.toggleDeletePopup(!1)},this.togglePopup=(e,t)=>{this.setState(s=>s.openPopup!==e&&!1!==t?{openPopup:e}:s.openPopup===e&&!0!==t?{openPopup:""}:s)},this.toggleDeletePopup=e=>{this.togglePopup("delete",e)},this.toggleEditPopup=e=>{this.togglePopup("edit",e)},this.closePopups=()=>{this.setState({openPopup:""})}}render(){const{comment:e}=this.props,t=e.authorName||e.author,s=!1===e.authorActive&&t?Object(h.translateWithParameters)("user.x_deleted",t):t;return n.createElement("div",{className:"issue-comment"},n.createElement("div",{className:"issue-comment-author",title:s},n.createElement(y.a,{className:"little-spacer-right",hash:e.authorAvatar,name:t,size:16}),s),n.createElement("div",{className:"issue-comment-text markdown",dangerouslySetInnerHTML:{__html:Object(ge.sanitize)(e.htmlText)}}),n.createElement("div",{className:"issue-comment-age"},n.createElement("span",{className:"a11y-hidden"},Object(h.translate)("issue.comment.posted_on")),n.createElement(fe.a,{date:e.createdAt})),n.createElement("div",{className:"issue-comment-actions"},e.updatable&&n.createElement("div",{className:"dropdown"},n.createElement(b.a,{closeOnClickOutside:!1,onRequestClose:this.closePopups,open:"edit"===this.state.openPopup,overlay:n.createElement(R,{comment:e,onComment:this.handleEdit,placeholder:"",placement:J.PopupPlacement.BottomRight,toggleComment:this.toggleEditPopup})},n.createElement(d.EditButton,{"aria-label":Object(h.translate)("issue.comment.edit"),className:"js-issue-comment-edit button-small",onClick:this.toggleEditPopup}))),e.updatable&&n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.closePopups,open:"delete"===this.state.openPopup,overlay:n.createElement(ve,{onDelete:this.handleDelete})},n.createElement(d.DeleteButton,{"aria-label":Object(h.translate)("issue.comment.delete"),className:"js-issue-comment-delete button-small",onClick:this.toggleDeletePopup})))))}}var Ee,Oe=s(317),xe=s(528),je=s.n(xe),we=s(320),Ne=s(328),ke=s(322),Pe=s(563),Se=s(614),Ce=s(366),Le=s.n(Ce),_e=s(658);class Ie extends n.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={changelog:[]}}componentDidMount(){this.mounted=!0,this.loadChangelog()}componentWillUnmount(){this.mounted=!1}loadChangelog(){Object(r.g)(this.props.issue.key).then(({changelog:e})=>{this.mounted&&this.setState({changelog:e})},()=>{})}render(){const{issue:e}=this.props,{author:t}=e;return n.createElement(x.DropdownOverlay,{placement:J.PopupPlacement.BottomRight},n.createElement("div",{className:"menu is-container issue-changelog"},n.createElement("table",{className:"spaced"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:"thin text-left text-top nowrap"},n.createElement(Le.a,{date:e.creationDate})),n.createElement("td",{className:"text-left text-top"},t?"".concat(Object(h.translate)("created_by")," ").concat(t):Object(h.translate)("created"))),this.state.changelog.map((e,t)=>{const s=e.userName||e.user;return n.createElement("tr",{key:t},n.createElement("td",{className:"thin text-left text-top nowrap"},n.createElement(Le.a,{date:e.creationDate})),n.createElement("td",{className:"text-left text-top"},s&&n.createElement("p",null,n.createElement(y.a,{className:"little-spacer-right",hash:e.avatar,name:s,size:16}),e.isUserActive?s:Object(h.translateWithParameters)("user.x_deleted",s)),e.diffs.map(e=>n.createElement(_e.a,{diff:e,key:e.key}))))})))))}}class De extends n.PureComponent{constructor(){super(...arguments),this.toggleChangelog=e=>{this.props.togglePopup("changelog",e)},this.handleClick=()=>{this.toggleChangelog()},this.handleClose=()=>{this.toggleChangelog(!1)}}render(){return n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:n.createElement(Ie,{issue:this.props.issue})},n.createElement(d.ButtonLink,{"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-show-changelog",onClick:this.handleClick},n.createElement("span",{className:"issue-meta-label"},n.createElement(fe.a,{date:this.props.creationDate})),n.createElement(v.a,{className:"little-spacer-left"}))))}}!function(e){e.Ready="READY",e.Beta="BETA",e.Deprecated="DEPRECATED",e.Removed="REMOVED"}(Ee||(Ee={}));var Te=s(476);function Me(e){const{engine:t,engineName:s,manualVulnerability:a,message:r,ruleKey:i,ruleStatus:o}=e,l=s||t;return n.createElement("div",{className:"issue-message break-word"},n.createElement("span",{className:"spacer-right"},r),n.createElement(d.ButtonLink,{"aria-label":Object(h.translate)("issue.why_this_issue.long"),className:"issue-see-rule spacer-right text-baseline",onClick:()=>e.onOpenRule({key:i})},Object(h.translate)("issue.why_this_issue")),o&&(o===Ee.Deprecated||o===Ee.Removed)&&n.createElement(Te.a,{className:"spacer-left",content:Object(h.translate)("rules.status",o,"help"),links:[{href:"/documentation/user-guide/rules/",label:Object(h.translateWithParameters)("see_x",Object(h.translate)("rules"))}]},n.createElement("span",{className:"spacer-right badge badge-error"},Object(h.translate)("rules.status",o))),l&&n.createElement(L.a,{overlay:Object(h.translateWithParameters)("issue.from_external_rule_engine",l)},n.createElement("div",{className:"badge spacer-right text-baseline"},l)),a&&n.createElement(L.a,{overlay:Object(h.translate)("issue.manual_vulnerability.description")},n.createElement("div",{className:"badge spacer-right text-baseline"},Object(h.translate)("issue.manual_vulnerability"))))}var Ae=s(717),Be=s.n(Ae),Re=s(345),Ue=s.n(Re),Fe=s(435),ze=s.n(Fe),qe=s(415);class He extends n.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{this.props.onFilter(e,this.props.issue)}}render(){const{issue:e}=this.props,t=["type","severity","status","resolution","assignee","rule",...(e.tags||[]).map(e=>"tag###".concat(e)),"project",e.subProject?"module":void 0,"file"].filter(e=>e),s=e.assigneeName||e.assignee;return n.createElement(x.DropdownOverlay,{noPadding:!0},n.createElement("header",{className:"menu-search"},n.createElement("h6",null,Object(h.translate)("issue.filter_similar_issues"))),n.createElement(I,{className:"issues-similar-issues-menu",currentItem:t[0],items:t,onSelect:this.handleSelect},n.createElement(_,{className:"display-flex-center",item:"type"},n.createElement(oe.a,{className:"little-spacer-right",query:e.type}),Object(h.translate)("issue.type",e.type)),n.createElement(_,{item:"severity"},n.createElement(F.a,{className:"display-flex-center",severity:e.severity})),n.createElement(_,{item:"status"},n.createElement(ae.a,{className:"display-flex-center",resolution:void 0,status:e.status})),n.createElement(_,{item:"resolution"},null!=e.resolution?Object(h.translate)("issue.resolution",e.resolution):Object(h.translate)("unresolved")),n.createElement(_,{item:"assignee"},s?n.createElement("span",null,Object(h.translate)("assigned_to"),n.createElement(y.a,{className:"little-spacer-left little-spacer-right",hash:e.assigneeAvatar,name:s,size:16}),!1===e.assigneeActive?Object(h.translateWithParameters)("user.x_deleted",s):s):Object(h.translate)("unassigned")),n.createElement("li",{className:"divider"}),n.createElement(_,{item:"rule"},Object(qe.limitComponentName)(e.ruleName)),null!=e.tags&&e.tags.map(e=>n.createElement(_,{item:"tag###".concat(e),key:"tag###".concat(e)},n.createElement(ze.a,{className:"icon-half-transparent little-spacer-right text-middle"}),n.createElement("span",{className:"text-middle"},e))),n.createElement("li",{className:"divider"}),n.createElement(_,{item:"project"},n.createElement(Ue.a,{className:"little-spacer-right",qualifier:"TRK"}),e.projectName),null!=e.subProject&&n.createElement(_,{item:"module"},n.createElement(Ue.a,{className:"little-spacer-right",qualifier:"BRC"}),e.subProjectName),n.createElement(_,{item:"file"},n.createElement(Ue.a,{className:"little-spacer-right",qualifier:e.componentQualifier}),Object(qe.fileFromPath)(e.componentLongName))))}}class We extends n.PureComponent{constructor(){super(...arguments),this.handleFilter=(e,t)=>{this.togglePopup(!1),this.props.onFilter&&this.props.onFilter(e,t)},this.togglePopup=e=>{this.props.togglePopup("similarIssues",e)},this.handleClose=()=>{this.togglePopup(!1)}}render(){return n.createElement("div",{className:"dropdown"},n.createElement(b.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:n.createElement(He,{issue:this.props.issue,onFilter:this.handleFilter})},n.createElement(d.ButtonLink,{"aria-label":Object(h.translate)("issue.filter_similar_issues"),"aria-expanded":this.props.isOpen,className:"issue-action issue-action-with-options js-issue-filter",onClick:this.togglePopup,title:Object(h.translate)("issue.filter_similar_issues")},n.createElement(Be.a,{className:"icon-half-transparent"}),n.createElement(v.a,{className:"icon-half-transparent"}))))}}function Ke(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Ve(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ye(e){const{issue:t}=e,s=null!=e.onFilter,a=t.secondaryLocations.length+t.flows.reduce((e,t)=>e+t.length,0),r=n.createElement(L.a,{overlay:Object(h.translateWithParameters)("issue.this_issue_involves_x_code_locations",Object(we.formatMeasure)(a,"INT"))},n.createElement(Pe.a,null,a)),i=e.displayLocationsCount&&a>0,o=Object(ke.j)(t.project,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(s),!0).forEach((function(t){Ve(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ke(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(Ne.d)(e.branchLike),{issues:t.key,open:t.key,types:"SECURITY_HOTSPOT"===t.type?t.type:void 0}));return n.createElement("div",{className:"issue-row"},n.createElement(Se.a.Consumer,null,({externalRulesRepoNames:e,openRule:s})=>n.createElement(Me,{engine:t.externalRuleEngine,engineName:t.externalRuleEngine&&e&&e[t.externalRuleEngine],manualVulnerability:t.fromHotspot&&"VULNERABILITY"===t.type,message:t.message,onOpenRule:s,ruleKey:t.rule,ruleStatus:t.ruleStatus})),n.createElement("div",{className:"issue-row-meta"},n.createElement("div",{className:"issue-meta-list"},n.createElement("div",{className:"issue-meta"},n.createElement(De,{creationDate:t.creationDate,isOpen:"changelog"===e.currentPopup,issue:t,togglePopup:e.togglePopup})),null!=t.textRange&&n.createElement("div",{className:"issue-meta"},n.createElement("span",{className:"issue-meta-label",title:Object(h.translate)("line_number")},"L",t.textRange.endLine)),i&&n.createElement("div",{className:"issue-meta"},e.displayLocationsLink?n.createElement(Oe.c,{target:"_blank",to:o},r):r),n.createElement("div",{className:"issue-meta"},n.createElement(Oe.c,{className:"js-issue-permalink link-no-underline",target:"_blank",title:Object(h.translate)("permalink"),to:o},n.createElement(je.a,null))),s&&n.createElement("div",{className:"issue-meta"},n.createElement(We,{isOpen:"similarIssues"===e.currentPopup,issue:t,onFilter:e.onFilter,togglePopup:e.togglePopup})))))}class Qe extends n.PureComponent{constructor(){super(...arguments),this.handleCheck=()=>{this.props.onCheck&&this.props.onCheck(this.props.issue.key)},this.handleClick=e=>{!function e(t){if(!t)return!1;const s=(t.tagName||"").toUpperCase();return["A","BUTTON","INPUT","TEXTAREA"].includes(s)||e(t.parentElement)}(e.target)&&this.props.onClick&&(e.preventDefault(),this.props.onClick(this.props.issue.key))},this.editComment=(e,t)=>{l(this.props.onChange,Object(r.d)({comment:e,text:t}))},this.deleteComment=e=>{l(this.props.onChange,Object(r.c)({comment:e}))}}render(){const{issue:e}=this.props,t=null!=this.props.onCheck,s=p()("issue",{hotspot:"SECURITY_HOTSPOT"===e.type,"issue-with-checkbox":t,selected:this.props.selected});return n.createElement("div",{className:s,"data-issue":e.key,onClick:this.handleClick,role:"group"},n.createElement(Ye,{branchLike:this.props.branchLike,currentPopup:this.props.currentPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:e,onFilter:this.props.onFilter,togglePopup:this.props.togglePopup}),n.createElement(de,{currentPopup:this.props.currentPopup,issue:e,onAssign:this.props.onAssign,onChange:this.props.onChange,togglePopup:this.props.togglePopup}),e.comments&&e.comments.length>0&&n.createElement("div",{className:"issue-comments"},e.comments.map(e=>n.createElement(ye,{comment:e,key:e.key,onDelete:this.deleteComment,onEdit:this.editComment}))),t&&n.createElement(n.Fragment,null,n.createElement(m.a,{checked:this.props.checked||!1,className:"issue-checkbox-container",onCheck:this.handleCheck})))}}class Xe extends n.PureComponent{constructor(){super(...arguments),this.togglePopup=(e,t)=>{this.props.onPopupToggle(this.props.issue.key,e,t)},this.handleAssignement=e=>{const{issue:t}=this.props;t.assignee!==e&&l(this.props.onChange,Object(r.l)({issue:t.key,assignee:e})),this.togglePopup("assign",!1)}}componentDidMount(){this.props.selected&&this.bindShortcuts()}componentWillUpdate(e){!e.selected&&this.props.selected&&this.unbindShortcuts()}componentDidUpdate(e){!e.selected&&this.props.selected&&this.bindShortcuts()}componentWillUnmount(){this.props.selected&&this.unbindShortcuts()}bindShortcuts(){a("f","issues",()=>(this.togglePopup("transition"),!1)),a("a","issues",()=>(this.togglePopup("assign"),!1)),a("m","issues",()=>(this.props.issue.actions.includes("assign")&&this.handleAssignement("_me"),!1)),a("i","issues",()=>(this.togglePopup("set-severity"),!1)),a("c","issues",()=>(this.togglePopup("comment"),!1)),a("t","issues",()=>(this.togglePopup("edit-tags"),!1)),a("space","issues",()=>{if(this.props.onCheck)return this.props.onCheck(this.props.issue.key),!1})}unbindShortcuts(){a.unbind("f","issues"),a.unbind("a","issues"),a.unbind("m","issues"),a.unbind("i","issues"),a.unbind("c","issues"),a.unbind("space","issues"),a.unbind("t","issues")}render(){return n.createElement(Qe,{branchLike:this.props.branchLike,checked:this.props.checked,currentPopup:this.props.openPopup,displayLocationsCount:this.props.displayLocationsCount,displayLocationsLink:this.props.displayLocationsLink,issue:this.props.issue,onAssign:this.handleAssignement,onChange:this.props.onChange,onCheck:this.props.onCheck,onClick:this.props.onClick,onFilter:this.props.onFilter,selected:this.props.selected,togglePopup:this.togglePopup})}}Xe.defaultProps={selected:!1}},706:function(e,t,s){var a=s(313),n=s(707);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},707:function(e,t,s){(t=s(314)(!1)).push([e.i,".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}",""]),e.exports=t},708:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s(311),n=s(2);s(709);function r(e){return n.createElement("div",{className:a("location-message",{selected:e.selected})},e.children)}},709:function(e,t,s){var a=s(313),n=s(710);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},710:function(e,t,s){(t=s(314)(!1)).push([e.i,'.location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:""}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}',""]),e.exports=t},711:function(e,t,s){var a=s(313),n=s(712);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},i=(a(n,r),n.locals?n.locals:{});e.exports=i},712:function(e,t,s){(t=s(314)(!1)).push([e.i,'.issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#666;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:"";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}.issue .badge-error{background-color:#eec8c8}',""]),e.exports=t},736:function(e,t,s){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};Object.defineProperty(t,"__esModule",{value:!0});var r=s(2),i=s(315);t.default=function(e){var t=e.fill,s=void 0===t?"currentColor":t,o=n(e,["fill"]);return r.createElement(i.default,a({},o),r.createElement("path",{d:"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z",style:{fill:s}}))}},807:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return Ce}));var a=s(540),n=s.n(a),r=s(661),i=s.n(r),o=s(2),l=s(321),c=s(31),p=s(371),u=s(328),m=s(614),h=s(1151),d=s(1152),g=s(823),b=s(621),f=s(361),v=s(556);function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function x(e,t,s,a=500){return function(e,t,s=500){return Object(f.k)(E({},e,{p:t,ps:s})).then(e=>e.issues.map(t=>Object(v.b)(t,e.components,e.users,e.rules)))}(e,s).then(n=>{if(0===n.length)return[];const r=n[n.length-1];return null!=r.textRange&&r.textRange.endLine>t||n.length<a?n:x(e,t,s+1,a).then(e=>[...n,...e])})}function j(e,t,s,a){const n=function(e,t){return E({additionalFields:"_all",resolved:"false",componentKeys:e,s:"FILE_LINE"},Object(u.d)(t))}(e,a);return new Promise(e=>{x(n,s,1).then(t=>{e(t)})})}var w=s(312),N=s(806),k=s(659),P=s(775);const S=[],C={code:"",duplicated:!1,isNew:!1,line:0};class L extends o.PureComponent{constructor(){super(...arguments),this.getDuplicationsForLine=e=>this.props.duplicationsByLine[e.line]||S,this.getIssuesForLine=e=>this.props.issuesByLine[e.line]||S,this.getIssueLocationsForLine=e=>this.props.issueLocationsByLine[e.line]||S,this.renderLine=({line:e,index:t,displayCoverage:s,displayDuplications:a,displayIssues:n})=>{const{highlightedLocationMessage:r,highlightedLocations:i,selectedIssue:l,sources:c}=this.props,p=Object(k.b)(e,i),u=this.props.duplications?this.props.duplications.length:0,m=this.getIssuesForLine(e);return o.createElement(N.a,{branchLike:this.props.branchLike,displayAllIssues:this.props.displayAllIssues,displayCoverage:s,displayDuplications:a,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,displayIssues:n,displayLocationMarkers:this.props.displayLocationMarkers,duplications:this.getDuplicationsForLine(e),duplicationsCount:u,highlighted:e.line===this.props.highlightedLine,highlightedLocationMessage:Object(P.b)(r,p),highlightedSymbols:Object(P.a)(this.props.symbolsByLine[e.line],this.props.highlightedSymbols),issueLocations:this.getIssueLocationsForLine(e),issuePopup:this.props.issuePopup,issues:m,key:e.line,last:t===this.props.sources.length-1&&!this.props.hasSourcesAfter,line:e,loadDuplications:this.props.loadDuplications,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:this.props.onIssueSelect,onIssueUnselect:this.props.onIssueUnselect,onIssuesClose:this.props.onIssuesClose,onIssuesOpen:this.props.onIssuesOpen,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.onSymbolClick,openIssues:this.props.openIssuesByLine[e.line]||!1,previousLine:t>0?c[t-1]:void 0,renderDuplicationPopup:this.props.renderDuplicationPopup,scroll:this.props.scroll,secondaryIssueLocations:p,selectedIssue:Object(P.c)(l,m)})}}render(){const{issues:e=[],sources:t}=this.props,s=t.some(e=>null!=e.coverageStatus),a=t.some(e=>!!e.duplicated),n=e.length>0,r=n&&e.some(e=>!e.textRange);return o.createElement("div",{className:"source-viewer-code"},this.props.hasSourcesBefore&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesBefore?o.createElement("div",{className:"js-component-viewer-loading-before"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(c.translate)("source_viewer.loading_more_code"))):o.createElement(w.Button,{className:"js-component-viewer-source-before",onClick:this.props.loadSourcesBefore},Object(c.translate)("source_viewer.load_more_code"))),o.createElement("table",{className:"source-table"},o.createElement("tbody",null,r&&this.renderLine({line:C,index:-1,displayCoverage:s,displayDuplications:a,displayIssues:n}),t.map((e,t)=>this.renderLine({line:e,index:t,displayCoverage:s,displayDuplications:a,displayIssues:n})))),this.props.hasSourcesAfter&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesAfter?o.createElement("div",{className:"js-component-viewer-loading-after"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(c.translate)("source_viewer.loading_more_code"))):o.createElement(w.Button,{className:"js-component-viewer-source-after",onClick:this.props.loadSourcesAfter},Object(c.translate)("source_viewer.load_more_code"))))}}var _=s(660),I=s(37),D=s(317),T=s(357),M=s(327),A=s.n(M),B=s(736),R=s.n(B),U=s(345),F=s.n(U),z=s(377),q=s(320),H=s(415),W=s(9),K=s(341),V=s(373),Y=s(322),Q=s(335),X=s(329),G=s.n(X),J=s(506),Z=s.n(J),$=s(387),ee=s.n($),te=s(331),se=s.n(te),ae=s(381),ne=s.n(ae),re=s(435),ie=s.n(re),oe=s(606),le=s.n(oe),ce=s(542),pe=s(655),ue=s(354),me=s(421),he=s(398),de=s(527),ge=s(396);function be({measure:e}){return o.createElement("div",{className:"measure measure-one-line","data-metric":e.metric.key,key:e.metric.key},o.createElement("span",{className:"measure-name"},Object(ge.b)(e.metric.key)&&[ge.a.bugs,ge.a.vulnerabilities,ge.a.code_smells].includes(e.metric.key)&&o.createElement(ne.a,{className:"little-spacer-right",query:e.metric.key}),Object(c.getLocalizedMetricName)(e.metric)),o.createElement("span",{className:"measure-value"},o.createElement(me.a,{metricKey:e.metric.key,metricType:e.metric.type,small:!0,value:e.value})))}function fe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ve(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(s),!0).forEach((function(t){ye(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ye(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ee extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!0,measures:{},showAllMeasures:!1},this.fetchData=()=>{Promise.all([this.fetchMeasures(),this.fetchIssues()]).then(([e,t])=>{this.mounted&&this.setState(ve({loading:!1,measures:e},t))},()=>{this.mounted&&this.setState({loading:!1})})},this.fetchMeasures=()=>Object(pe.c)().then(e=>{const t=Object(ue.getDisplayMetrics)(e).map(e=>e.key);return Object(ce.d)(ve({component:this.props.sourceViewerFile.key,metricKeys:t.join()},Object(u.d)(this.props.branchLike))).then(t=>{const s=Object(ue.enhanceMeasuresWithMetrics)(t,e).filter(e=>e.metric);return Z()(s,e=>e.metric.key)})}),this.fetchIssues=()=>Object(f.f)(ve({componentKeys:this.props.sourceViewerFile.key,resolved:"false"},Object(u.d)(this.props.branchLike)),["types","severities","tags"]).then(({facets:e})=>{const t=e.find(e=>"severities"===e.property),s=e.find(e=>"tags"===e.property),a=e.find(e=>"types"===e.property);return{severitiesFacet:t&&t.values,tagsFacet:s&&s.values,typesFacet:a&&a.values}}),this.handleAllMeasuresClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.setState({showAllMeasures:!0})},this.renderMeasure=e=>e?o.createElement(be,{key:e.metric.key,measure:e}):null,this.renderLines=()=>{const{measures:e}=this.state;return o.createElement("div",{className:"measures-viewer-section"},o.createElement("div",{className:"measures-viewer-card"},o.createElement("div",{className:"measures"},this.renderMeasure(e.lines),this.renderMeasure(e.ncloc),this.renderMeasure(e.comment_lines),this.renderMeasure(e.comment_lines_density)),o.createElement("div",{className:"measures"},this.renderMeasure(e.cognitive_complexity),this.renderMeasure(e.complexity),this.renderMeasure(e.function_complexity))))},this.renderBigMeasure=e=>e?o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(me.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(c.getLocalizedMetricName)(e.metric,!0))):null,this.renderIssues=()=>{const{measures:e,severitiesFacet:t,tagsFacet:s,typesFacet:a}=this.state;return o.createElement("div",{className:"measures-viewer-section"},o.createElement("div",{className:"measures-viewer-card"},o.createElement("div",{className:"measures"},this.renderBigMeasure(e.violations),this.renderBigMeasure(e.sqale_index)),e.violations&&!!e.violations.value&&o.createElement(o.Fragment,null,a&&o.createElement("div",{className:"measures"},G()(a,e=>V.c.indexOf(e.val)).map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(ne.a,{className:"little-spacer-right",query:e.val}),Object(c.translate)("issue.type",e.val)),o.createElement("span",{className:"measure-value"},Object(q.formatMeasure)(e.count,"SHORT_INT"))))),t&&o.createElement("div",{className:"measures"},G()(t,e=>V.h.indexOf(e.val)).map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(he.a,{severity:e.val})),o.createElement("span",{className:"measure-value"},Object(q.formatMeasure)(e.count,"SHORT_INT"))))),s&&o.createElement("div",{className:"measures"},s.map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(ie.a,{className:"little-spacer-right"}),e.val),o.createElement("span",{className:"measure-value"},Object(q.formatMeasure)(e.count,"SHORT_INT"))))))))},this.renderCoverage=()=>{const{coverage:e}=this.state.measures;return e?o.createElement("div",{className:"measures-viewer-section"},o.createElement("div",{className:"measures-viewer-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(de.a,{size:"big",value:e.value})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(me.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(c.getLocalizedMetricName)(e.metric)))),o.createElement("div",{className:"measures"},this.renderMeasure(this.state.measures.uncovered_lines),this.renderMeasure(this.state.measures.lines_to_cover),this.renderMeasure(this.state.measures.uncovered_conditions),this.renderMeasure(this.state.measures.conditions_to_cover)))):null},this.renderDuplications=()=>{const{duplicated_lines_density:e}=this.state.measures;return e?o.createElement("div",{className:"measures-viewer-section"},o.createElement("div",{className:"measures-viewer-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(le.a,{muted:void 0===e.value,size:"big",value:Number(e.value||0)})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(me.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(c.getLocalizedMetricName)(e.metric,!0)))),o.createElement("div",{className:"measures"},this.renderMeasure(this.state.measures.duplicated_blocks),this.renderMeasure(this.state.measures.duplicated_lines)))):null},this.renderTests=()=>{const{measures:e}=this.state;return o.createElement("div",{className:"measures-viewer"},o.createElement("div",{className:"measures-viewer-section measures-viewer-section-limited"},o.createElement("div",{className:"measures-viewer-card"},o.createElement("div",{className:"measures"},this.renderMeasure(e.tests),this.renderMeasure(e.test_success_density),this.renderMeasure(e.test_failures),this.renderMeasure(e.test_errors),this.renderMeasure(e.skipped_tests),this.renderMeasure(e.test_execution_time)))))},this.renderDomain=(e,t)=>o.createElement("div",{className:"measures-viewer-card",key:e},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measure measure-big"},o.createElement("span",{className:"measure-name"},Object(c.translate)("metric_domain",e))),G()(t.filter(e=>void 0!==e.value),e=>Object(c.getLocalizedMetricName)(e.metric)).map(e=>this.renderMeasure(e)))),this.renderAllMeasures=()=>{const e=ee()(Object.values(this.state.measures),e=>e.metric.domain),t=Object.keys(e),s=t.filter((e,t)=>t%2==1),a=t.filter((e,t)=>t%2==0);return o.createElement("div",{className:"measures-viewer measures-viewer-secondary"},o.createElement("div",{className:"measures-viewer-section"},s.map(t=>this.renderDomain(t,e[t]))),o.createElement("div",{className:"measures-viewer-section"},a.map(t=>this.renderDomain(t,e[t]))))}}componentDidMount(){this.mounted=!0,this.fetchData()}componentWillUnmount(){this.mounted=!1}render(){const{branchLike:e,sourceViewerFile:t}=this.props,{loading:s}=this.state,a=Object(c.translate)("component_viewer.file_measures");return o.createElement(se.a,{contentLabel:a,onRequestClose:this.props.onClose,size:"large"},o.createElement("div",{className:"modal-head"},o.createElement("h2",null,a)),o.createElement("div",{className:"modal-body modal-container"},o.createElement("div",{className:"measures-viewer-header big-spacer-bottom"},o.createElement("div",null,o.createElement(F.a,{className:"little-spacer-right",qualifier:"TRK"}),o.createElement(D.c,{to:Object(Y.c)(t.project,e)},t.projectName),t.subProject&&o.createElement(o.Fragment,null,o.createElement(F.a,{className:"big-spacer-left little-spacer-right",qualifier:"BRC"}),t.subProjectName)),o.createElement("div",{className:"display-flex-center little-spacer-top"},o.createElement(F.a,{className:"little-spacer-right",qualifier:t.q}),t.path)),s?o.createElement("i",{className:"spinner"}):o.createElement(o.Fragment,null,"UTS"===t.q?this.renderTests():o.createElement("div",{className:"measures-viewer"},this.renderLines(),this.renderIssues(),this.renderCoverage(),this.renderDuplications())),o.createElement("div",{className:"spacer-top"},this.state.showAllMeasures?this.renderAllMeasures():o.createElement("a",{className:"js-show-all-measures",href:"#",onClick:this.handleAllMeasuresClick},Object(c.translate)("component_viewer.show_all_measures")))),o.createElement("footer",{className:"modal-foot"},o.createElement(w.ResetButtonLink,{onClick:this.props.onClose},Object(c.translate)("close"))))}}function Oe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function xe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(s),!0).forEach((function(t){je(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function je(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class we extends o.PureComponent{constructor(){super(...arguments),this.state={measuresOverlay:!1},this.handleShowMeasuresClick=e=>{e.preventDefault(),this.setState({measuresOverlay:!0})},this.handleMeasuresOverlayClose=()=>{this.setState({measuresOverlay:!1})},this.openInWorkspace=e=>{e.preventDefault();const{key:t}=this.props.sourceViewerFile;this.props.openComponent({branchLike:this.props.branchLike,key:t})},this.renderIssueMeasures=()=>{const{branchLike:e,componentMeasures:t,sourceViewerFile:s}=this.props;return t&&t.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"source-viewer-header-measure-separator"}),V.c.map(a=>{const n=xe({},Object(u.d)(e),{files:s.path,resolved:"false",types:a}),r=t.find(e=>e.metric===v.a[a].metric);return o.createElement("div",{className:"source-viewer-header-measure",key:a},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(c.translate)("issue.type",a)),o.createElement("span",{className:"source-viewer-header-measure-value"},o.createElement(D.c,{to:Object(Y.j)(s.project,n)},Object(q.formatMeasure)(r&&r.value||0,"INT"))))}))}}render(){const{showMeasures:e}=this.props,{key:t,measures:s,path:a,project:n,projectName:r,q:i,subProject:l,subProjectName:p}=this.props.sourceViewerFile,m=i===Q.a.TestFile?"tests":"lines",h=Object(K.getBaseUrl)()+"/api/sources/raw?"+Object(I.stringify)(Object(W.omitNil)(xe({key:t},Object(u.d)(this.props.branchLike))));return o.createElement("div",{className:"source-viewer-header display-flex-center"},o.createElement("div",{className:"flex-1 little-spacer-top"},o.createElement("div",{className:"component-name"},o.createElement("div",{className:"component-name-parent"},o.createElement("a",{className:"link-with-icon",href:Object(K.getPathUrlAsString)(Object(Y.c)(n,this.props.branchLike))},o.createElement(F.a,{qualifier:"TRK"})," ",o.createElement("span",null,r))),void 0!==l&&o.createElement("div",{className:"component-name-parent"},o.createElement(F.a,{qualifier:"BRC"})," ",o.createElement("span",null,p)),o.createElement("div",{className:"component-name-path"},o.createElement(F.a,{qualifier:i})," ",o.createElement("span",null,Object(H.collapsedDirFromPath)(a)),o.createElement("span",{className:"component-name-file"},Object(H.fileFromPath)(a)),o.createElement("span",{className:"nudged-up spacer-left"},o.createElement(T.ClipboardIconButton,{"aria-label":Object(c.translate)("component_viewer.copy_path_to_clipboard"),className:"button-link link-no-underline",copyValue:a}))))),this.state.measuresOverlay&&o.createElement(Ee,{branchLike:this.props.branchLike,onClose:this.handleMeasuresOverlayClose,sourceViewerFile:this.props.sourceViewerFile}),e&&o.createElement("div",{className:"display-flex-center"},s[m]&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(c.translate)("metric.".concat(m,".name"))),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(q.formatMeasure)(s[m],"SHORT_INT"))),void 0!==s.coverage&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(c.translate)("metric.coverage.name")),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(q.formatMeasure)(s.coverage,"PERCENT"))),void 0!==s.duplicationDensity&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(c.translate)("duplications")),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(q.formatMeasure)(s.duplicationDensity,"PERCENT"))),this.renderIssueMeasures()),o.createElement(A.a,{className:"source-viewer-header-actions flex-0",overlay:o.createElement("ul",{className:"menu"},o.createElement("li",null,o.createElement("a",{className:"js-measures",href:"#",onClick:this.handleShowMeasuresClick},Object(c.translate)("component_viewer.show_details"))),o.createElement("li",null,o.createElement(D.c,{className:"js-new-window",rel:"noopener noreferrer",target:"_blank",to:Object(Y.e)(this.props.sourceViewerFile.project,this.props.branchLike,t)},Object(c.translate)("component_viewer.new_window"))),o.createElement("li",null,o.createElement("a",{className:"js-workspace",href:"#",onClick:this.openInWorkspace},Object(c.translate)("component_viewer.open_in_workspace"))),o.createElement("li",null,o.createElement("a",{className:"js-raw-source",href:h,rel:"noopener noreferrer",target:"_blank"},Object(c.translate)("component_viewer.show_raw_source")))),overlayPlacement:z.PopupPlacement.BottomRight},o.createElement(w.ButtonIcon,{className:"js-actions"},o.createElement(R.a,null))))}}var Ne=s(770);s(1798);function ke(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Pe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(s),!0).forEach((function(t){Se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ke(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ce extends o.PureComponent{constructor(e){super(e),this.mounted=!1,this.loadSources=()=>new Promise((e,t)=>{const s=this.props.aroundLine?Math.max(1,this.props.aroundLine-250+1):1;let a=this.props.aroundLine?this.props.aroundLine+250+1:501;1===s&&a<500&&(a=500),a++,this.propsLoadSources(this.props.component,s,a,this.props.branchLike).then(t=>{e(t)},s=>{this.mounted&&([403,404].includes(s.status)?t(s):e([]))})}),this.loadSourcesBefore=()=>{if(!this.state.sources)return;const e=this.state.sources[0];this.setState({loadingSourcesBefore:!0});const t=Math.max(1,e.line-500);Promise.all([this.propsLoadSources(this.props.component,t,e.line-1,this.props.branchLike),this.loadIssues(this.props.component,t,e.line-1,this.props.branchLike)]).then(([e,t])=>{this.mounted&&this.setState(s=>{const a=n()([...t,...s.issues||[]],e=>e.key);return{issues:a,issuesByLine:Object(b.c)(a),issueLocationsByLine:Object(b.d)(a),loadingSourcesBefore:!1,sources:[...this.computeCoverageStatus(e),...s.sources||[]],symbolsByLine:Pe({},s.symbolsByLine,{},Object(b.e)(e))}})},()=>{})},this.loadSourcesAfter=()=>{if(!this.state.sources)return;const e=this.state.sources[this.state.sources.length-1];this.setState({loadingSourcesAfter:!0});const t=e.line+1,s=e.line+500+1;Promise.all([this.propsLoadSources(this.props.component,t,s,this.props.branchLike),this.loadIssues(this.props.component,t,s,this.props.branchLike)]).then(([e,t])=>{this.mounted&&this.setState(s=>{const a=n()([...s.issues||[],...t],e=>e.key);return{issues:a,issuesByLine:Object(b.c)(a),issueLocationsByLine:Object(b.d)(a),hasSourcesAfter:e.length>500,loadingSourcesAfter:!1,sources:[...s.sources||[],...this.computeCoverageStatus(e.slice(0,500))],symbolsByLine:Pe({},s.symbolsByLine,{},Object(b.e)(e.slice(0,500)))}})},()=>{})},this.loadDuplications=()=>{Object(p.q)(Pe({key:this.props.component},Object(u.d)(this.props.branchLike))).then(e=>{this.mounted&&this.setState({duplications:e.duplications,duplicationsByLine:Object(b.a)(e.duplications),duplicatedFiles:e.files})},()=>{})},this.handleIssuePopupToggle=(e,t,s)=>{this.setState(a=>{const n=a.issuePopup&&a.issuePopup.name===t&&a.issuePopup.issue===e;return!1===s||n?!0!==s&&n?{issuePopup:void 0}:null:{issuePopup:{issue:e,name:t}}})},this.handleSymbolClick=e=>{this.setState(t=>({highlightedSymbols:i()(t.highlightedSymbols,e).length>0?[]:e}))},this.handleIssueSelect=e=>{this.props.onIssueSelect?this.props.onIssueSelect(e):this.setState({selectedIssue:e})},this.handleIssueUnselect=()=>{this.props.onIssueUnselect?this.props.onIssueUnselect():this.setState({selectedIssue:void 0})},this.handleOpenIssues=e=>{this.setState(t=>({openIssuesByLine:Pe({},t.openIssuesByLine,{[e.line]:!0})}))},this.handleCloseIssues=e=>{this.setState(t=>({openIssuesByLine:Pe({},t.openIssuesByLine,{[e.line]:!1})}))},this.handleIssueChange=e=>{this.setState(({issues:t=[]})=>{const s=t.map(t=>t.key===e.key?e:t);return{issues:s,issuesByLine:Object(b.c)(s)}}),this.props.onIssueChange&&this.props.onIssueChange(e)},this.renderDuplicationPopup=(e,t)=>{const{component:s,duplicatedFiles:a,duplications:n}=this.state;if(!s||!a)return null;const r=Object(d.b)(n,e);return o.createElement(m.a.Consumer,null,({openComponent:e})=>o.createElement(h.a,{blocks:Object(d.a)(r,t),branchLike:this.props.branchLike,duplicatedFiles:a,inRemovedComponent:Object(d.c)(r),openComponent:e,sourceViewerFile:s}))},this.state={duplicationsByLine:{},hasSourcesAfter:!1,highlightedSymbols:[],issuesByLine:{},issueLocationsByLine:{},loading:!0,loadingSourcesAfter:!1,loadingSourcesBefore:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},selectedIssue:e.selectedIssue,sourceRemoved:!1,symbolsByLine:{}}}componentDidMount(){this.mounted=!0,this.fetchComponent()}componentWillReceiveProps(e){e.component===this.props.component&&Object(u.i)(e.branchLike,this.props.branchLike)||this.setState({loading:!0}),void 0!==e.onIssueSelect&&e.selectedIssue!==this.props.selectedIssue&&this.setState({selectedIssue:e.selectedIssue})}componentDidUpdate(e){if(e.component===this.props.component&&Object(u.i)(e.branchLike,this.props.branchLike))if(void 0!==this.props.aroundLine&&e.aroundLine!==this.props.aroundLine&&this.isLineOutsideOfRange(this.props.aroundLine))this.fetchSources();else{const{selectedIssue:e}=this.props,{issues:t}=this.state;void 0!==e&&void 0!==t&&void 0===t.find(t=>t.key===e)&&this.reloadIssues()}else this.fetchComponent()}componentWillUnmount(){this.mounted=!1}get loadComponent(){return this.props.loadComponent||Le}get loadIssues(){return this.props.loadIssues||j}get propsLoadSources(){return this.props.loadSources||_e}computeCoverageStatus(e){return e.map(e=>Pe({},e,{coverageStatus:Object(g.a)(e)}))}isLineOutsideOfRange(e){const{sources:t}=this.state;if(t&&t.length>0){const s=t[0],a=t[t.length-1];return e<s.line||e>a.line}return!0}fetchComponent(){this.setState({loading:!0});const e=(this.props.aroundLine||0)+500,t=(t,s)=>{this.loadIssues(this.props.component,1,e,this.props.branchLike).then(e=>{if(this.mounted){const a=s.slice(0,500);this.setState({component:t,duplicatedFiles:void 0,duplications:void 0,duplicationsByLine:{},hasSourcesAfter:s.length>500,highlightedSymbols:[],issueLocationsByLine:Object(b.d)(e),issues:e,issuesByLine:Object(b.c)(e),loading:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},issuePopup:void 0,sourceRemoved:!1,sources:this.computeCoverageStatus(a),symbolsByLine:Object(b.e)(s.slice(0,500))},()=>{this.props.onLoaded&&this.props.onLoaded(t,a,e)})}},()=>{})},s=(e,t)=>{this.mounted&&(403===e.status?this.setState({component:t,loading:!1,notAccessible:!0}):404===e.status&&this.setState({component:t,loading:!1,sourceRemoved:!0}))};this.loadComponent(this.props.component,this.props.branchLike).then(e=>{("FIL"===e.q||"UTS"===e.q?this.loadSources():Promise.resolve([])).then(s=>t(e,s),t=>s(t,e))},e=>{this.mounted&&(403===e.status?this.setState({loading:!1,notAccessible:!0}):404===e.status&&this.setState({loading:!1,notExist:!0}))})}fetchSources(){this.loadSources().then(e=>{if(this.mounted){const t=e.slice(0,500);this.setState({sources:e.slice(0,500),hasSourcesAfter:e.length>500},()=>{this.props.onLoaded&&this.state.component&&this.state.issues&&this.props.onLoaded(this.state.component,t,this.state.issues)})}},()=>{})}reloadIssues(){if(!this.state.sources)return;const e=this.state.sources[0],t=this.state.sources[this.state.sources.length-1];this.loadIssues(this.props.component,e&&e.line,t&&t.line,this.props.branchLike).then(e=>{this.mounted&&this.setState({issues:e,issuesByLine:Object(b.c)(e),issueLocationsByLine:Object(b.d)(e)})},()=>{})}renderCode(e){const t=e.length>0&&e[0].line>1;return o.createElement(L,{branchLike:this.props.branchLike,componentKey:this.props.component,displayAllIssues:this.props.displayAllIssues,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,displayLocationMarkers:this.props.displayLocationMarkers,duplications:this.state.duplications,duplicationsByLine:this.state.duplicationsByLine,hasSourcesAfter:this.state.hasSourcesAfter,hasSourcesBefore:t,highlightedLine:this.props.highlightedLine,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedLocations:this.props.highlightedLocations,highlightedSymbols:this.state.highlightedSymbols,issueLocationsByLine:this.state.issueLocationsByLine,issuePopup:this.state.issuePopup,issues:this.state.issues,issuesByLine:this.state.issuesByLine,loadDuplications:this.loadDuplications,loadSourcesAfter:this.loadSourcesAfter,loadSourcesBefore:this.loadSourcesBefore,loadingSourcesAfter:this.state.loadingSourcesAfter,loadingSourcesBefore:this.state.loadingSourcesBefore,onIssueChange:this.handleIssueChange,onIssuePopupToggle:this.handleIssuePopupToggle,onIssueSelect:this.handleIssueSelect,onIssueUnselect:this.handleIssueUnselect,onIssuesClose:this.handleCloseIssues,onIssuesOpen:this.handleOpenIssues,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.handleSymbolClick,openIssuesByLine:this.state.openIssuesByLine,renderDuplicationPopup:this.renderDuplicationPopup,scroll:this.props.scroll,selectedIssue:this.state.selectedIssue,sources:e,symbolsByLine:this.state.symbolsByLine})}renderHeader(e,t){return this.props.slimHeader?o.createElement(Ne.a,{branchLike:e,sourceViewerFile:t}):o.createElement(m.a.Consumer,null,({openComponent:e})=>o.createElement(we,{branchLike:this.props.branchLike,componentMeasures:this.props.componentMeasures,openComponent:e,showMeasures:this.props.showMeasures,sourceViewerFile:t}))}render(){const{component:e,loading:t,sources:s,notAccessible:a,sourceRemoved:n}=this.state;return t?null:this.state.notExist?o.createElement(l.Alert,{className:"spacer-top",variant:"warning"},Object(c.translate)("component_viewer.no_component")):a?o.createElement(l.Alert,{className:"spacer-top",variant:"warning"},Object(c.translate)("code_viewer.no_source_code_displayed_due_to_security")):e?o.createElement(_.a.Provider,{value:{branchLike:this.props.branchLike,file:e}},o.createElement("div",{className:"source-viewer",ref:e=>this.node=e},this.renderHeader(this.props.branchLike,e),n&&o.createElement(l.Alert,{className:"spacer-top",variant:"warning"},Object(c.translate)("code_viewer.no_source_code_displayed_due_to_source_removed")),!n&&void 0!==s&&this.renderCode(s))):null}}function Le(e,t){return Promise.all([Object(p.k)(Pe({component:e},Object(u.d)(t))),Object(p.j)(Pe({component:e},Object(u.d)(t)))]).then(([e,{component:t}])=>Pe({},e,{leakPeriodDate:t.leakPeriodDate}))}function _e(e,t,s,a){return Object(p.u)(Pe({key:e,from:t,to:s},Object(u.d)(a)))}Ce.defaultProps={displayAllIssues:!1,displayIssueLocationsCount:!0,displayIssueLocationsLink:!0,displayLocationMarkers:!0}}}]);
//# sourceMappingURL=278.m.16f32b11.chunk.js.map